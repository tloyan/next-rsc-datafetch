# Formulaire, validation (client)

### ğŸ’¡ Formulaire et Validation

## ğŸ“ Tes notes

DÃ©taille ce que tu as appris ici,Â surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

`React Hook Form` est une librairie trÃ¨s rÃ©pandue pour gÃ©rer les formulaires en `React`. Elle offre une maniÃ¨re simple, performante et extensible de gÃ©rer les formulaires dans les applications `React`. `React` `Hook Form` exploite les hooks de `React` pour fournir une API intuitive qui facilite la gestion des formulaires, la validation des champs, et le contrÃ´le des donnÃ©es soumises, tout en optimisant les performances grÃ¢ce Ã  une rÃ©duction du nombre de rendus inutiles.

### **Avantages de `React` `Hook Form`**

1. **Performance** : `React` `Hook Form` minimise les rendus inutiles, garantissant des performances optimales mÃªme pour les formulaires complexes.
2. **FacilitÃ© d'utilisation** : Avec son API intuitive et ses hooks, la mise en place et la gestion des formulaires deviennent simples et dÃ©claratives.
3. **Validation flexible** : Elle prend en charge la validation native du navigateur et s'intÃ¨gre facilement avec des bibliothÃ¨ques tierces comme `Yup` et `Zod` .
4. **Gestion des erreurs** : La bibliothÃ¨que fournit des outils pour gÃ©rer les erreurs et offrir des retours immÃ©diats aux utilisateurs.
5. **Support des formulaires complexes** : `React` `Hook Form` gÃ¨re efficacement les formulaires dynamiques, imbriquÃ©s et rÃ©pÃ©titifs avec des hooks comme **`useFieldArray`**.

`React Hook Form` sâ€™intÃ¨gre parfaitement avec `zod`

- [https://react-hook-form.com/docs/useform](https://react-hook-form.com/docs/useform)

`Shadcn` propose un composant `<Form>` prÃ©configurÃ© avec `React Hook Form`.

- [https://ui.shadcn.com/docs/components/form](https://ui.shadcn.com/docs/components/form)

```tsx
import { z } from "zod"

const formSchema = z.object({
  username: z.string().min(2).max(50),
})

 const form = useForm<Product>({
     resolver: zodResolver(formSchema),
     ...
```

ğŸ“‘ Le lien vers la doc [https://www.react-hook-form.com/api/](https://www.react-hook-form.com/api/)

<aside>
ğŸ’¡ Cette validation est faite cÃ´tÃ© client

</aside>

## Exercice

Dans cet exercice, nous avons prÃ©parÃ© le terrain dans le dossier `exercise/shop-admin`.

Il a y une liste de produits qui sâ€™affiche dans un tableau `shadcn` et un formulaire.

- page â†’ products-management â†’ react-hook-form â†’ action

ğŸ¶ Dans cet exercice, tu vas devoir :

- CrÃ©er un `schÃ©ma Zod` pour valider le formulaire, afficher des messages dâ€™erreur avec `React Hook form`.
- Soumettre le formulaire en appelant le serveur Action `await persistProduct(product)`

Fichiers

- `exercise/shop-admin/form/react-hook-form.tsx`

## Bonus

### 1. ğŸš€ z.infer

Dans notre cas, nous avons un type TS `Product` qui permet de typer le formulaire et un schÃ©ma `zod`.

```tsx
useForm<Product>
resolver: zodResolver(formSchema)
```

Nous avons donc 2 dÃ©finitions de donnÃ©es. Si nous avons besoin de renommer le champ `title` en `product_name` par exemple, il faut modifier 2 dÃ©finitions de donnÃ©es.

- Heureusement, `Zod` fournit un utilitaire permettant de convertir un schÃ©ma en type :

```tsx
const A = z.string()
type A = z.infer<typeof A> // string

const u: A = 12 // TypeError
const u: A = 'asdf' // compiles
```

- [https://zod.dev/?id=type-inference](https://zod.dev/?id=type-inference)

Dans cet exercice, tu vas devoir supprimer le type `Product` du formulaire et utiliser `z.infer` pour crÃ©er un type `FormSchemaType` qui sera utilisÃ© dans le formulaire.

Fichiers

- `exercise/shop-admin/form/react-hook-form.tsx`

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://zod.dev/](https://zod.dev/)

## Ils vont tâ€™aider

- **ğŸ¶ Mowgli le Chien** : _Mowgli te guidera dans chaque exercice._
- **ğŸ¤– Ash le Robot** : _Ash le Robot te donnera du code utile._
- **ğŸš€ Julia La roquette** : _Julia te donnera des dÃ©fis supplÃ©mentaires._
- **â›ï¸ Hulk le Marteau** : _Quand du code Ã  supprimer est prÃ©sent_
- **ğŸ‘¨â€âœˆï¸ Hugo le chef de projet** : _Va t'aider sur les spÃ©cifications du projet_

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-next-avis?entry.1912869708=Next%20PRO&entry.1430994900=03.RSC%20Data%20fetch&entry.533578441=07%20Form%20Validation%20client).
